<!DOCTYPE html>
<html>
	
<head>
	<title>Log url generation script</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
	
<body>
	<div class="container">
		<h1 style="text-align:center;color:green;">
		GeeksforGeeks
	</h1>
		<form>
			<div class="form-group">
				<label for="">PD time:</label>
				<input id="pd_time"
					class="form-control"
					type="text" value="Apr 4, 2018 at 8:11 PM"
					placeholder="Input Your Date Here">
				<input id="pd_millis" type="text" class="form-control"/>
			</div>
			<div class="form-group">
				<button id="btn-alert"
						class="btn btn-success btn-lg float-right"
						type="button">
					Submit
				</button>
			</div>
			<label>Output:</label>
			<input id="result" type="text">
			<div>
				<input type=button value="Open Multiple Windows" onclick="open_win()">
			</div>
			<div>
				<!-- <label for="">Splunk url with issue:</label>
				<input type="" id="currentUrlInput"/> -->
				<p><label for="currentUrlInput">Splunk url with issue spotted:</label>
				<textarea id="currentUrlInput" name="currentUrlInput" rows="4" cols="80"></textarea>
				<br>
				<input type="submit" value="Submit">
				</p>
			</div>
		</div>

		<div class="controls">
			<div class="row">
				<div class="col-sm-3">
					<div class="form-group">
						<label for="form_name">Name *</label>
						<input id="form_name" type="text" name="surname" class="form-control" placeholder="Please enter your name *" data-error="name is required.">
						<div class="help-block with-errors"></div>
					</div>
				</div>
				<div class="col-sm-3">
					<div class="form-group">
						<label for="form_email">Email *</label>
						<input id="form_email" type="email" name="email" class="form-control" placeholder="Please enter your email *" data-error="Valid email is required.">
						<div class="help-block with-errors"></div>
					</div>
				</div>
				<div class="col-sm-3">
					<div class="form-group">
						<label for="form_phone">Phone</label>
						<input id="form_phone" type="tel" name="phone" class="form-control" placeholder="Please enter your phone number">
						<div class="help-block with-errors"></div>
					</div>
				</div>
				<div class="col-sm-3">
					<div class="form-group">
						<label for="form_phone">Test</label>
						<input id="form_phone" type="tel" name="phone" class="form-control" placeholder="Please enter your phone number">
						<div class="help-block with-errors"></div>
					</div>
				</div>

			</div>
		</div>

		</form>
	</div>
	
	<script>
		
		document.getElementById("btn-alert").addEventListener("click", function() {
		
			var pd_time = document.getElementById("pd_time");

			var currentUrl = document.getElementById("currentUrlInput").value;
			alert(currentUrl); 
			//parse this url, add 5 secs as url1, subtract 5 secs as url2 
			//dropdown to select the nearby time.

			//var datestring = "Apr 4, 2018 at 8:11 PM";
			var datestring = pd_time.value;
			var parts = datestring.match(/(\w+)\s(\d+)[, ]\s(\d+)\sat\s(\d+):(\d+)\s(\w+)/);
			console.log(parts);
			//- 6 elements 'Apr', '4', '2018', '8', '11', 'PM'
			var year = parts[3];
			var monthStr = parts[1];
			monthStr = monthStr.toLowerCase();
			var monthNames = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"];
			var month = monthNames.indexOf(monthStr).toString().padStart(2,0);
			var day = parts[2].toString().padStart(2,0);
			var hour = parseInt(parts[4]);
			var mins = parts[5].toString().padStart(2,0);
			var ampm = parts[6];
			var secs = '00';
			if (ampm.toLowerCase = 'pm') {
				if (hour <= 11) {
					hour = hour + 12;
				}
			}
			hourStr = hour.toString().padStart(2,0)

			var strDate = year+"-"+month+"-"+day+"T"+hourStr+":"+mins+":"+secs+".000-06:00"
			console.log(strDate);
			var epochDate = Date.parse(strDate);
			console.log(epochDate);

			var date = Date.parse("2022-11-21T12:39:00.000-06:00"); //Just for sample only
			console.log(date);

			var resultField = document.getElementById("result");
			resultField.value = epochDate;

		});

		function open_win() {
			window.open("http://www.java2s.com/")
			setTimeout(doSomething("test"), 3000);
			window.open("http://www.java2s.com/")
		}

		function doSomething(inputVar) {
			//do whatever you want here
			console.log(inputVar);
		}

	</script>
</body>

</html>

